{"version":3,"file":"input-modality-detector.d.ts","sources":["input-modality-detector.d.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA","sourcesContent":["/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\nimport { InjectionToken, OnDestroy, NgZone } from '@angular/core';\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport { Observable } from 'rxjs';\r\n/**\r\n * The input modalities detected by this service. Null is used if the input modality is unknown.\r\n */\r\nexport declare type InputModality = 'keyboard' | 'mouse' | 'touch' | null;\r\n/** Options to configure the behavior of the InputModalityDetector. */\r\nexport interface InputModalityDetectorOptions {\r\n    /** Keys to ignore when detecting keyboard input modality. */\r\n    ignoreKeys?: number[];\r\n}\r\n/**\r\n * Injectable options for the InputModalityDetector. These are shallowly merged with the default\r\n * options.\r\n */\r\nexport declare const INPUT_MODALITY_DETECTOR_OPTIONS: InjectionToken<InputModalityDetectorOptions>;\r\n/**\r\n * Default options for the InputModalityDetector.\r\n *\r\n * Modifier keys are ignored by default (i.e. when pressed won't cause the service to detect\r\n * keyboard input modality) for two reasons:\r\n *\r\n * 1. Modifier keys are commonly used with mouse to perform actions such as 'right click' or 'open\r\n *    in new tab', and are thus less representative of actual keyboard interaction.\r\n * 2. VoiceOver triggers some keyboard events when linearly navigating with Control + Option (but\r\n *    confusingly not with Caps Lock). Thus, to have parity with other screen readers, we ignore\r\n *    these keys so as to not update the input modality.\r\n *\r\n * Note that we do not by default ignore the right Meta key on Safari because it has the same key\r\n * code as the ContextMenu key on other browsers. When we switch to using event.key, we can\r\n * distinguish between the two.\r\n */\r\nexport declare const INPUT_MODALITY_DETECTOR_DEFAULT_OPTIONS: InputModalityDetectorOptions;\r\n/**\r\n * The amount of time needed to pass after a touchstart event in order for a subsequent mousedown\r\n * event to be attributed as mouse and not touch.\r\n *\r\n * This is the value used by AngularJS Material. Through trial and error (on iPhone 6S) they found\r\n * that a value of around 650ms seems appropriate.\r\n */\r\nexport declare const TOUCH_BUFFER_MS = 650;\r\n/**\r\n * Service that detects the user's input modality.\r\n *\r\n * This service does not update the input modality when a user navigates with a screen reader\r\n * (e.g. linear navigation with VoiceOver, object navigation / browse mode with NVDA, virtual PC\r\n * cursor mode with JAWS). This is in part due to technical limitations (i.e. keyboard events do not\r\n * fire as expected in these modes) but is also arguably the correct behavior. Navigating with a\r\n * screen reader is akin to visually scanning a page, and should not be interpreted as actual user\r\n * input interaction.\r\n *\r\n * When a user is not navigating but *interacting* with a screen reader, this service attempts to\r\n * update the input modality to keyboard, but in general this service's behavior is largely\r\n * undefined.\r\n */\r\nexport declare class InputModalityDetector implements OnDestroy {\r\n    private readonly _platform;\r\n    /** Emits whenever an input modality is detected. */\r\n    readonly modalityDetected: Observable<InputModality>;\r\n    /** Emits when the input modality changes. */\r\n    readonly modalityChanged: Observable<InputModality>;\r\n    /** The most recently detected input modality. */\r\n    get mostRecentModality(): InputModality;\r\n    /**\r\n     * The most recently detected input modality event target. Is null if no input modality has been\r\n     * detected or if the associated event target is null for some unknown reason.\r\n     */\r\n    _mostRecentTarget: HTMLElement | null;\r\n    /** The underlying BehaviorSubject that emits whenever an input modality is detected. */\r\n    private readonly _modality;\r\n    /** Options for this InputModalityDetector. */\r\n    private readonly _options;\r\n    /**\r\n     * The timestamp of the last touch input modality. Used to determine whether mousedown events\r\n     * should be attributed to mouse or touch.\r\n     */\r\n    private _lastTouchMs;\r\n    /**\r\n     * Handles keydown events. Must be an arrow function in order to preserve the context when it gets\r\n     * bound.\r\n     */\r\n    private _onKeydown;\r\n    /**\r\n     * Handles mousedown events. Must be an arrow function in order to preserve the context when it\r\n     * gets bound.\r\n     */\r\n    private _onMousedown;\r\n    /**\r\n     * Handles touchstart events. Must be an arrow function in order to preserve the context when it\r\n     * gets bound.\r\n     */\r\n    private _onTouchstart;\r\n    constructor(_platform: Platform, ngZone: NgZone, document: Document, options?: InputModalityDetectorOptions);\r\n    ngOnDestroy(): void;\r\n}\r\n"]}